This is a shell script, written in the Bash programming language, that automates the installation of Apache Kafka and Java on an EC2 instance.
<sub>
#!/bin/bash

# Download and extract Kafka
wget https://downloads.apache.org/kafka/3.4.0/kafka_2.13-3.4.0.tgz
tar -xvf kafka_2.13-3.4.0.tgz

# Install Java if it's not already installed
if ! type java >/dev/null 2>&1; then
  sudo yum install java-1.8.0-openjdk
fi
</sub>

The script begins by using the wget command to download the Kafka binary files from the Apache website, and then uses the tar command to extract the files. The version being downloaded is 3.4.0, which can be changed to a different version if needed.

Next, the script checks if Java is already installed on the EC2 instance by running the type java command. If Java is not already installed, the script uses the yum package manager to install Java 1.8.0 OpenJDK, a popular implementation of the Java Virtual Machine.

The purpose of this script is to streamline the installation process of Kafka and Java on an EC2 instance, saving time and reducing the risk of errors that could occur during a manual installation.

Step-by-step explanation for setting up Kafka in an EC2 instance and creating a topic for message production and consumption. The first step involves connecting to the Zookeeper server by running the command <sub>"bin/zookeeper-server-start.sh config/zookeeper.properties"</sub> in one console. This starts the Zookeeper server, which is a distributed coordination service used by Kafka for managing its cluster.

The second step is to open another console and connect to the Kafka server. The command <sub>"export KAFKA_HEAP_OPTS="-Xmx256M -Xms128M""</sub> allocates some memory to the Kafka server. Then, the user changes the directory to the Kafka installation directory by running the command "cd kafka_2.12-3.3.1" and starts the Kafka server by running the command <sub>"bin/kafka-server-start.sh config/server.properties".</sub>

The next step involves modifying the IP address from private to public to match the EC2 instance being used. This is important for the Kafka clients to be able to connect to the Kafka cluster.

To allow traffic to flow to the Kafka server, the user creates a security group that allows all traffic with a source of their IP address.

Finally, the user creates a Kafka topic named <sub>"demo_testing2"</sub> by running the command <sub>"bin/kafka-topics.sh --create --topic demo_testing2 --bootstrap-server {Public IP of the EC2 Instance:9092} --replication-factor 1 --partitions 1"</sub>. This command creates a new topic with the specified name and settings, including the replication factor and the number of partitions. Once this command is executed, the Kafka topic can be used for producing and consuming messages.




